# Stew Backend - Flask API

The backend for the Stew collaborative study application is built using Flask. This API handles data management, authentication, and communication between the frontend and the database.

## Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Technologies Used](#technologies-used)
- [API Documentation](#api-documentation)
- [Database](#database)
- [Installation](#installation)
- [Usage](#usage)
- [Contributing](#contributing)
- [License](#license)

## Overview

The Stew backend serves as the foundation for the Stew application, providing essential functionalities such as user authentication, data storage, real-time communication, task management, and a doubt resolution feature using generative AI.

## Features

### User Authentication
- **JWT-Based Authentication**: Secure user registration and login, ensuring that only authorized users can access protected resources.

### Timetable Management
- Create, read, update, and delete study timetables, allowing users to manage their study schedules effectively.

### Group Management
- Create and manage study groups, including functionalities for adding members, sending messages, and sharing files.

### Task Management
- Create, read, update, complete, and delete tasks.
- View scores related to task completion.

### Doubt Resolution
- Ask questions and receive answers generated by a generative AI model.
- Store and retrieve the history of questions and answers.

### Flashcards
- Create, update, and delete flashcards to help users reinforce their learning and improve retention.

### Data Visualization
- Provide endpoints to fetch user progress and scores, enabling the frontend to visualize data effectively.

## Technologies Used

- **Backend Framework**: Flask
- **Database**: SQLite for local development (can be extended to other databases like PostgreSQL for production)
- **Authentication**: JSON Web Tokens (JWT)
- **Real-time Communication**: Flask-SocketIO (if applicable)
- **Data Validation**: Marshmallow or Flask-SQLAlchemy for data serialization and validation
- **Generative AI**: Google Gemini for generating answers to doubts

## API Documentation

### Base URL
The base URL for the API is:
```
http://localhost:5000
```

### Endpoints

#### User Authentication
- `POST /register`: Register a new user
- `POST /login`: Authenticate an existing user and receive a JWT

#### Timetable Management
- `GET /timetable`: Retrieve user timetables
- `POST /timetable`: Create a new timetable
- `PUT /timetable/<id>`: Update a timetable by ID
- `DELETE /timetable/<id>`: Delete a timetable by ID

#### Group Management
- `POST /groups`: Create a new study group
- `GET /groups`: Retrieve all groups for a user
- `POST /groups/<id>/members`: Add a member to a group
- `GET /groups/<id>`: Retrieve a specific group and its members
- `DELETE /groups/<id>`: Delete a group

#### Task Management
- `POST /tasks`: Create a new task
- `GET /tasks`: Retrieve all tasks for the current user
- `POST /tasks/<int:task_id>/complete`: Mark a task as completed
- `DELETE /tasks/<int:task_id>`: Delete a task
- `GET /tasks/scores`: Get total tasks, completed tasks, and total score

#### Doubt Resolution
- `POST /ask`: Ask a question and receive an answer
- `GET /history`: Retrieve the history of questions and answers

### Real-Time Group Chat

The Flask server runs with Socket.IO support to manage live chat events. 

### Database Management with SQLAlchemy

**SQLAlchemy** is used in Stew as an ORM (Object Relational Mapper) to interact with the database in a more Pythonic way, abstracting away complex SQL queries. It allows us to define database models as Python classes, which makes it easier to read and maintain our code. Each model represents a table in the database, with class attributes corresponding to columns. For instance, in Stew, models like `Task`, `User`, and `Doubt` define various fields like `title`, `description`, and `completed`, along with relationships between models. With SQLAlchemy, we can handle all CRUD operations—Create, Read, Update, Delete—on these models effortlessly, using Python.

### Database Version Control with Flask-Migrate

**Flask-Migrate** provides version control for database migrations by leveraging **Alembic**, a database migration tool for SQLAlchemy. As Stew evolves, its database schema might need updates, like adding new tables or modifying existing columns. Flask-Migrate helps us manage these schema changes smoothly without losing data. When we modify our model classes, we can use Flask-Migrate to generate migration scripts. These scripts record the necessary SQL commands to update the database schema, allowing us to:


## Installation

To set up the Stew backend, follow these steps:

1. **Clone the Repository**:
   Open your terminal and run the following command to clone the repository:
   ```bash
   git clone https://github.com/iesxz-c/Stew-Server.git
   ```

2. **Navigate to the Backend Directory**:
   Change your current working directory to the backend folder:
   ```bash
   cd Stew/backend
   ```

3. **Create a Virtual Environment** (optional but recommended):
   It's a good practice to use a virtual environment to manage your dependencies:
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows use `venv\Scripts\activate`
   ```

4. **Install the Dependencies**:
   Install the required packages using pip:
   ```bash
   pip install -r requirements.txt
   ```

5. **Run the Application**:
   Start the Flask development server:
   ```bash
   flask run
   ```

6. **Open Your Browser**:
   The API will be accessible at `http://localhost:5000`.


For the frontend of the Stew application, visit: [Stew Client](https://github.com/iesxz-c/Stew-Client)
